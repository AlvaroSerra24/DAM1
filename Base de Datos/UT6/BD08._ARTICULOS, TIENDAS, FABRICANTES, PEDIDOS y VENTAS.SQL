DROP TABLE FABRICANTES cascade constraints; 
DROP TABLE ARTICULOS   cascade constraints; 
DROP TABLE TIENDAS     cascade constraints; 
DROP TABLE PEDIDOS     cascade constraints; 
DROP TABLE VENTAS      cascade constraints; 

CREATE TABLE FABRICANTES 
    ( 
     COD_FABRICANTE NUMBER (3)  NOT NULL , 
     NOMBRE         VARCHAR2 (30 BYTE) , 
     PAIS           VARCHAR2 (30 BYTE) 
    );
ALTER TABLE FABRICANTES 
    ADD CONSTRAINT "FABRICANTESPK" PRIMARY KEY (COD_FABRICANTE ) ;
	
	
INSERT INTO FABRICANTES VALUES(10,'CALVO',     'ESPAÑA');
INSERT INTO FABRICANTES VALUES(15,'LU',        'BELGICA');
INSERT INTO FABRICANTES VALUES(20,'BARILLA',   'ITALIA');
INSERT INTO FABRICANTES VALUES(25,'GALLO',     'ESPAÑA');
INSERT INTO FABRICANTES VALUES(30,'PRESIDENT', 'FRANCIA');
	
CREATE TABLE ARTICULOS 
    ( 
     COD_ARTICULO    NUMBER (3)  NOT NULL ,
     NOM_ARTICULO    VARCHAR2 (35 BYTE)  NOT NULL , 
     COD_FABRICANTE  NUMBER (3)  NOT NULL , 
     PESO            NUMBER (3)  NOT NULL , 
     CATEGORIA       VARCHAR2 (20 BYTE)  NOT NULL , 
     PRECIO_ACTUAL   NUMBER (6,2) , 
     PRECIO_COSTO    NUMBER (6,2) , 
     EXISTENCIAS     NUMBER (5) 
    );
ALTER TABLE ARTICULOS 
    ADD CONSTRAINT "ARTICULOSPK" PRIMARY KEY (COD_ARTICULO) ;
ALTER TABLE ARTICULOS 
    ADD CONSTRAINT "FABRICANTEFK" FOREIGN KEY (COD_FABRICANTE) 
    REFERENCES FABRICANTES(COD_FABRICANTE); 

INSERT INTO ARTICULOS VALUES (1,'Macarrones',          20, 1, 'Primera',1,    0.98, 120);
INSERT INTO ARTICULOS VALUES (2,'Tallarines',          20, 2, 'Primera',1.20, 1,    100);
INSERT INTO ARTICULOS VALUES (3,'Tallarines',          20, 1, 'Segunda',0.99, 0.50, 100);
INSERT INTO ARTICULOS VALUES (4,'Macarrones',          20, 1, 'Tercera',0.80, 0.50, 100);
INSERT INTO ARTICULOS VALUES (5,'Atún',                10, 3, 'Primera',2,    1.50, 220);
INSERT INTO ARTICULOS VALUES (6,'Atún',                10, 3, 'Segunda',1.50, 1,    220);
INSERT INTO ARTICULOS VALUES (7,'Atún',                10, 3, 'Tercera',1,    0.50, 220);
INSERT INTO ARTICULOS VALUES (8,'Sardinillas',         10, 1, 'Primera',2.5,  2,    200);
INSERT INTO ARTICULOS VALUES (9,'Sardinillas',         10, 1, 'Segunda',2,    1.6,  200);
INSERT INTO ARTICULOS VALUES (10,'Sardinillas',        10, 1, 'Tercera',1,    1.5,  220);
INSERT INTO ARTICULOS VALUES (11,'Mejillones',         10, 1, 'Tercera',1,    0.9,  200);
INSERT INTO ARTICULOS VALUES (14,'Mejillones',         10, 1, 'Primera',3,    2,    300);
INSERT INTO ARTICULOS VALUES (15,'Macarrones',         25, 1, 'Primera',1.5,  1,    150);
INSERT INTO ARTICULOS VALUES (16,'Tallarines',         25, 1, 'Primera',1,    0.90, 100);
INSERT INTO ARTICULOS VALUES (17,'Fideos',             25, 1, 'Segunda',0.75, 0.50, 100);
INSERT INTO ARTICULOS VALUES (18,'Fideos',             25, 1, 'Primera',1,    0.80, 100);
INSERT INTO ARTICULOS VALUES (19,'Mermelada Fresa',    15, 1, 'Primera',2,    1.8,  100);
INSERT INTO ARTICULOS VALUES (20,'Mermelada Melocotón',15, 1, 'Segunda',1,    0.8,  100);
INSERT INTO ARTICULOS VALUES (21,'Mermelada Naranja',  15, 1, 'Tercera',0.50, 0.40, 100);
INSERT INTO ARTICULOS VALUES (22,'Harina Integral',    15, 1, 'Primera',1,    0.80, 100);
INSERT INTO ARTICULOS VALUES (23,'Harina de Trigo',    15, 1, 'Segunda',1,    0.80, 100);
INSERT INTO ARTICULOS VALUES (24,'Canutillos',         15, 2, 'Primera',1.7,  1.5,  110);
INSERT INTO ARTICULOS VALUES (25,'Canutillos',         15, 2, 'Segunda',1.2,  1.5,  110);
INSERT INTO ARTICULOS VALUES (26,'Leche entera',       30, 1, 'Primera',1.1,  1,    300);
INSERT INTO ARTICULOS VALUES (27,'Leche desnat.',      30, 1, 'Primera',1.2,  1,    300);
INSERT INTO ARTICULOS VALUES (28,'Leche semi.',        30, 1, 'Primera',1.30, 1.10, 300);
INSERT INTO ARTICULOS VALUES (29,'Leche entera',       30, 2, 'Primera',2.10, 2,    300);
INSERT INTO ARTICULOS VALUES (30,'Leche desnat.',      30, 2, 'Primera',2.2,  2,    300);
INSERT INTO ARTICULOS VALUES (31,'Leche semi.',        30, 2, 'Primera',2.3,  2.1,  300);
INSERT INTO ARTICULOS VALUES (32,'Mantequilla',        30, 1, 'Primera',1.8,  2,    200);
INSERT INTO ARTICULOS VALUES (33,'Mantequilla semi',   30, 1, 'Segunda',1.4,  2,    200);

	
CREATE TABLE TIENDAS 
    ( 
     COD_TIENDA VARCHAR2 (10 BYTE)  NOT NULL , 
     NOMBRE     VARCHAR2 (40 BYTE) , 
     DIRECCION  VARCHAR2 (30 BYTE) , 
     POBLACION  VARCHAR2 (30 BYTE) , 
     PROVINCIA  VARCHAR2 (30 BYTE) , 
     CODPOSTAL  NUMBER (5) 
    );

ALTER TABLE TIENDAS 
    ADD CONSTRAINT "TIENDASPK" PRIMARY KEY (COD_TIENDA) ;

INSERT INTO TIENDAS VALUES('0001-T','Ultramarinos Montse',   'Avda. Reconquista 10',  'Toledo',               'TOLEDO',       45001);
INSERT INTO TIENDAS VALUES('0002-G','Almacenes Pérez',       'C. Toledo, 20',         'Siguenza',             'GUADALAJARA',  19250); 
INSERT INTO TIENDAS VALUES('0003-M','Comestibles Rodolfo',   'C. del Val s/n',        'Alcalá de Henares',    'MADRID',       28807);
INSERT INTO TIENDAS VALUES('0004-M','La Pasta Gansa',        'C. Alcalá, 2',          'Madrid',               'MADRID',       28765);
INSERT INTO TIENDAS VALUES('0005-G','La gacela',             'C. Santander Rios, 45', 'Azuqueca',             'GUADALAJARA',  19200);
INSERT INTO TIENDAS VALUES('0006-T','Casa Lola',             'C. Cererías 24',        'Talavera de la Reina', 'TOLEDO',       45600);
 
 
CREATE TABLE PEDIDOS 
    (
	 COD_TIENDA        VARCHAR2 (10 BYTE)  NOT NULL ,
	 COD_ARTICULO      NUMBER (3)  NOT NULL ,  	 
     FECHA_PEDIDO      DATE  NOT NULL , 
     UNIDADES_PEDIDAS  NUMBER (4) 
    );
ALTER TABLE PEDIDOS 
    ADD CONSTRAINT PEDIDOSPK PRIMARY KEY (COD_ARTICULO, COD_TIENDA, FECHA_PEDIDO ) ;

ALTER TABLE PEDIDOS 
    ADD CONSTRAINT PEDIDOSARTPK FOREIGN KEY (COD_ARTICULO) 
    REFERENCES ARTICULOS (COD_ARTICULO); 
	
ALTER TABLE PEDIDOS 
    ADD CONSTRAINT PEDIDOSTIENDAPK FOREIGN KEY (COD_TIENDA) 
    REFERENCES TIENDAS (COD_TIENDA); 
	
ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';

INSERT INTO PEDIDOS VALUES ('0005-G',1,  TO_DATE('18/02/2020'), 30);
INSERT INTO PEDIDOS VALUES ('0005-G',2,  TO_DATE('21/02/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0002-G',5,  TO_DATE('11/03/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0005-G',1,  TO_DATE('14/04/2020'), 12);
INSERT INTO PEDIDOS VALUES ('0005-G',7,  TO_DATE('18/05/2020'), 24);
INSERT INTO PEDIDOS VALUES ('0005-G',7,  TO_DATE('19/05/2020'), 20);
INSERT INTO PEDIDOS VALUES ('0005-G',5,  TO_DATE('20/06/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0001-T',11, TO_DATE('20/02/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0001-T',10, TO_DATE('10/04/2020'), 12);
INSERT INTO PEDIDOS VALUES ('0001-T',9,  TO_DATE('24/06/2020'), 50);
INSERT INTO PEDIDOS VALUES ('0001-T',9,  TO_DATE('04/07/2020'), 11);
INSERT INTO PEDIDOS VALUES ('0001-T',17, TO_DATE('10/07/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0004-M',1,  TO_DATE('16/04/2020'), 30);
INSERT INTO PEDIDOS VALUES ('0004-M',3,  TO_DATE('21/06/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0004-M',3,  TO_DATE('12/08/2020'), 90);
INSERT INTO PEDIDOS VALUES ('0002-G',5,  TO_DATE('12/08/2020'), 20);
INSERT INTO PEDIDOS VALUES ('0003-M',21, TO_DATE('21/02/2020'), 20);
INSERT INTO PEDIDOS VALUES ('0003-M',22, TO_DATE('10/06/2020'), 30);
INSERT INTO PEDIDOS VALUES ('0003-M',25, TO_DATE('10/08/2020'), 50);
INSERT INTO PEDIDOS VALUES ('0004-M',15, TO_DATE('15/02/2020'), 40);
INSERT INTO PEDIDOS VALUES ('0004-M',30, TO_DATE('11/02/2020'), 60);
INSERT INTO PEDIDOS VALUES ('0004-M',31, TO_DATE('02/03/2020'), 10);
INSERT INTO PEDIDOS VALUES ('0004-M',25, TO_DATE('11/03/2020'), 80);
INSERT INTO PEDIDOS VALUES ('0004-M',18, TO_DATE('10/04/2020'), 40);
INSERT INTO PEDIDOS VALUES ('0006-T',17, TO_DATE('01/05/2020'), 100);
INSERT INTO PEDIDOS VALUES ('0006-T',19, TO_DATE('24/05/2020'), 50);	
	
CREATE TABLE VENTAS( 
	 COD_TIENDA         VARCHAR2 (10 BYTE)  NOT NULL , 
     COD_ARTICULO       NUMBER (3)  NOT NULL ,	 	
     FECHA_VENTA        DATE  NOT NULL , 
     UNIDADES_VENDIDAS  NUMBER (4) 
    );

ALTER TABLE VENTAS 
    ADD CONSTRAINT VENTASPK PRIMARY KEY(COD_ARTICULO, COD_TIENDA, FECHA_VENTA ) ;

ALTER TABLE VENTAS 
    ADD CONSTRAINT VENTASARTPK FOREIGN KEY (COD_ARTICULO) 
    REFERENCES ARTICULOS (COD_ARTICULO); 
	
ALTER TABLE VENTAS
    ADD CONSTRAINT VENTASTIENDAPK FOREIGN KEY (COD_TIENDA) 
    REFERENCES TIENDAS (COD_TIENDA); 
    
INSERT INTO VENTAS VALUES ('0005-G',1,  TO_DATE('19/02/2020'), 5);
INSERT INTO VENTAS VALUES ('0005-G',3,  TO_DATE('19/02/2020'), 6);
INSERT INTO VENTAS VALUES ('0005-G',3,  TO_DATE('20/03/2020'), 10);
INSERT INTO VENTAS VALUES ('0005-G',5,  TO_DATE('20/03/2020'), 8);
INSERT INTO VENTAS VALUES ('0005-G',1,  TO_DATE('17/04/2020'), 2);
INSERT INTO VENTAS VALUES ('0005-G',7,  TO_DATE('18/05/2020'), 14);
INSERT INTO VENTAS VALUES ('0005-G',9,  TO_DATE('24/06/2020'), 5);
INSERT INTO VENTAS VALUES ('0002-G',5,  TO_DATE('20/06/2020'), 5);
INSERT INTO VENTAS VALUES ('0002-G',11, TO_DATE('20/02/2020'), 6);
INSERT INTO VENTAS VALUES ('0002-G',10, TO_DATE('10/06/2020'), 2);
INSERT INTO VENTAS VALUES ('0002-G',5,  TO_DATE('10/08/2020'), 5);
INSERT INTO VENTAS VALUES ('0001-T',9,  TO_DATE('19/05/2020'), 15);
INSERT INTO VENTAS VALUES ('0001-T',10, TO_DATE('25/06/2020'), 5);
INSERT INTO VENTAS VALUES ('0003-M',15, TO_DATE('21/06/2020'), 4);
INSERT INTO VENTAS VALUES ('0003-M',21, TO_DATE('23/02/2020'), 2);
INSERT INTO VENTAS VALUES ('0003-M',22, TO_DATE('15/06/2020'), 3);
INSERT INTO VENTAS VALUES ('0003-M',25, TO_DATE('15/08/2020'), 5);
INSERT INTO VENTAS VALUES ('0004-M',15, TO_DATE('19/02/2020'), 4);
INSERT INTO VENTAS VALUES ('0004-M',30, TO_DATE('19/02/2020'), 6);
INSERT INTO VENTAS VALUES ('0004-M',31, TO_DATE('20/03/2020'), 1);
INSERT INTO VENTAS VALUES ('0004-M',25, TO_DATE('20/03/2020'), 8);
INSERT INTO VENTAS VALUES ('0004-M',18, TO_DATE('17/04/2020'), 4);
INSERT INTO VENTAS VALUES ('0006-T',17, TO_DATE('18/05/2020'), 10);
INSERT INTO VENTAS VALUES ('0006-T',19, TO_DATE('24/06/2020'), 5);

COMMIT;

